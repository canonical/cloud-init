cc_mounts:
  description: "This module can add or remove mountpoints from ``/etc/fstab`` as well\
    \ as\nconfigure swap. The ``mounts`` config key takes a list of fstab entries\
    \ to\nadd. Each entry is specified as a list of ``[ fs_spec, fs_file, fs_vfstype,\n\
    fs_mntops, fs-freq, fs_passno ]``. For more information on these options,\nconsult\
    \ the manual for ``/etc/fstab``. When specifying the ``fs_spec``, if\nthe device\
    \ name starts with one of ``xvd``, ``sd``, ``hd``, or ``vd``, the\nleading ``/dev``\
    \ may be omitted.\n\nAny mounts that do not appear to either an attached block\
    \ device or network\nresource will be skipped with a log like \"Ignoring nonexistent\
    \ mount ...\".\n\nCloud-init will attempt to add the following mount directives\
    \ if available\nand unconfigured in `/etc/fstab`::\n\n    mounts:\n    - [\"ephemeral0\"\
    , \"/mnt\", \"auto\", \"defaults,nofail,x-systemd.after=cloud-init.service\",\
    \ \"0\", \"2\"]\n    - [\"swap\", \"none\", \"swap\", \"sw\", \"0\", \"0\"]\n\n\
    In order to remove a previously listed mount, an entry can be added to\nthe `mounts`\
    \ list containing ``fs_spec`` for the device to be removed but\nno  mountpoint\
    \ (i.e. ``[ swap ]`` or ``[ swap, null ]``).\n\nThe ``mount_default_fields`` config\
    \ key allows default values to be\nspecified for the fields in a ``mounts`` entry\
    \ that are not specified,\naside from the ``fs_spec`` and the ``fs_file`` fields.\
    \ If specified, this\nmust be a list  containing 6 values. It defaults to::\n\n\
    \    mount_default_fields: [none, none, \"auto\", \"defaults,nofail,x-systemd.after=cloud-init.service\"\
    , \"0\", \"2\"]\n\nNon-systemd init systems will vary in ``mount_default_fields``.\n\
    \nSwap files can be configured by setting the path to the swap file to create\n\
    with ``filename``, the size of the swap file with ``size`` maximum size of\nthe\
    \ swap file if using an ``size: auto`` with ``maxsize``. By default no\nswap file\
    \ is created.\n\n.. note::\n    If multiple mounts are specified where a subsequent\
    \ mount's mountpoint\n    is inside of a previously declared mount's mountpoint\
    \ (i.e. the 1st\n    mount has a mountpoint of ``/abc`` and the 2nd mount has\
    \ a mountpoint\n    of ``/abc/def``) then this will not work as expected - ``cc_mounts``\n\
    \    first creates the directories for all the mountpoints **before** it\n   \
    \ starts to perform any mounts and so the sub-mountpoint directory will\n    not\
    \ be created correctly inside the parent mountpoint.\n\n    For systems using\
    \ util-linux's ``mount`` program this issue can be\n    worked around by specifying\
    \ ``X-mount.mkdir`` as part of a\n    ``fs_mntops`` value for the subsequent mount\
    \ entry.\n"
  examples:
  - comment: 'Mount ephemeral0 with "noexec" flag, /dev/sdc with mount_default_fields,

      and /dev/xvdh with custom fs_passno "0" to avoid fsck on the mount.

      Also provide an automatically sized swap with a max size of 10485760

      bytes.

      '
    file: cc_mounts/example1.yaml
  - comment: Create a 2 GB swap file at /swapfile using human-readable values
    file: cc_mounts/example2.yaml
  name: Mounts
  title: Configure mount points and swap files
